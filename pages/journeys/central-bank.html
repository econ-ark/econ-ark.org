<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HANK Journey for Central Banks - Econ-ARK</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Varela+Round&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/8281de4b75.js" crossorigin="anonymous"></script>
    
    <!-- Bootstrap CSS (matching main site) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Marked.js for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    
    <style>
        :root {
            --econ-ark-gunmetal: #2c4053;
            --econ-ark-blue: #1f476b;
            --econ-ark-red: #c41230;
            --econ-ark-orange: #f05a28;
            --econ-ark-body-text: #495057;
            --econ-ark-heading-text: #212529;
            --econ-ark-light-gray: #f8f9fa;
            --econ-ark-border-gray: #e9ecef;
            --econ-ark-white: #ffffff;
        }
        
        /* Typography - matching main site */
        body { 
            font-family: 'Roboto', sans-serif;
            font-weight: 400;
            text-rendering: optimizeLegibility;
            background-color: #f7fafb; 
            color: #444;
            font-size: 1rem;
        }
        
        h1, h2, h3, h4, h5, h6, .heading-font {
            font-family: 'Roboto', sans-serif;
            color: var(--econ-ark-heading-text);
            margin: 0;
            margin-bottom: 2em;
        }
        
        .mono-font {
            font-family: 'JetBrains Mono', monospace;
        }
        
        /* Link styles - matching main site */
        a,
        a:link,
        body a {
            color: var(--econ-ark-blue);
            transition: all 0.2s linear;
            text-decoration: none;
            font-weight: 500;
            border-bottom: 2px solid var(--econ-ark-blue);
            padding-bottom: 0.1rem;
        }
        
        a:hover {
            color: var(--econ-ark-blue);
            border-color: var(--econ-ark-blue);
            text-decoration: none;
        }
        
        /* Special link styles */
        .sidebar a,
        .header a,
        .btn-pill,
        .card a {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        /* Header - matching main site exactly */
        .toggle-nav {
            display: none;
        }
        
        .header {
            background: var(--econ-ark-blue);
            color: #fff;
            padding: 0.5rem 0;
            margin: 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .header .site-logo {
            margin: 0;
        }
        
        .header .site-logo a {
            border: 0 !important;
            padding: 0;
        }
        
        .header .site-logo img {
            width: 150px;
        }
        
        .header .navigation ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
        }
        
        .header .navigation ul li {
            margin: 0 0.3rem;
        }
        
        .header .navigation ul li a {
            display: block;
            padding: 0.6rem 1.2rem;
            font-weight: 400;
            text-decoration: none;
            font-size: 1.2rem;
            line-height: 1;
            outline: 0;
            border-bottom: 2px solid transparent;
            color: #fff;
        }
        
        .header .navigation ul li a:hover {
            border-bottom: 2px solid #fff;
        }
        
        .header .navigation ul li.active a {
            border-bottom: 2px solid #fff;
        }
        
        /* Mobile navigation styles */
        @media (max-width: 768px) {
            .toggle-nav {
                display: block;
                color: #fff;
                font-size: 1.5rem;
                text-decoration: none;
                border: none;
                background: none;
                cursor: pointer;
            }
            
            .header .navigation {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--econ-ark-blue);
                border-top: 1px solid rgba(255,255,255,0.1);
            }
            
            .header .navigation.show {
                display: block;
            }
            
            .header .navigation ul {
                flex-direction: column;
            }
            
            .header .navigation ul li {
                margin: 0;
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }
            
            .header .navigation ul li:last-child {
                border-bottom: none;
            }
        }
        
        /* Sidebar */
        .sidebar {
            position: sticky;
            top: 80px;
            height: calc(100vh - 80px);
            overflow-y: auto;
            z-index: 10;
        }
        
        .sidebar a {
            color: #898989;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
            font-weight: 400;
        }
        
        .sidebar a:hover,
        .sidebar a.active {
            color: var(--econ-ark-blue);
            border-left-color: var(--econ-ark-blue);
            background-color: var(--econ-ark-light-gray);
        }
        
        /* Section styling */
        .section-title {
            color: var(--econ-ark-blue);
            border-bottom: 2px solid var(--econ-ark-blue);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        /* Interactive elements */
        .flow-node {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .flow-node:hover {
            transform: scale(1.05);
            border-color: var(--econ-ark-blue);
            box-shadow: 0 4px 20px rgba(31, 71, 107, 0.3);
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }
        
        .timeline-item {
            transition: all 0.2s ease;
        }
        
        .timeline-item:hover .timeline-dot,
        .timeline-item.active .timeline-dot {
            background-color: var(--econ-ark-blue);
            border-color: var(--econ-ark-blue);
            transform: translateX(-50%) scale(1.2);
        }
        
        .timeline-item:hover,
        .timeline-item.active {
            color: var(--econ-ark-blue);
        }
        
        .timeline-dot {
            transition: all 0.3s ease;
            box-shadow: 0 0 0 0 var(--econ-ark-blue);
        }
        
        .timeline-item:hover .timeline-dot,
        .timeline-item.active .timeline-dot {
            box-shadow: 0 0 0 4px rgba(31, 71, 107, 0.2);
        }
        
        /* Tabs */
        .tab {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .tab.active {
            background-color: var(--econ-ark-blue);
            color: var(--econ-ark-white);
        }
        
        .tab:not(.active):hover {
            background-color: var(--econ-ark-light-gray);
        }
        
        /* Cards */
        .card {
            transition: all 0.2s ease;
            border: 1px solid var(--econ-ark-border-gray);
        }
        
        .card:hover {
            border-color: var(--econ-ark-blue);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .card:hover .card-arrow {
            opacity: 1;
            transform: translateX(4px);
        }
        
        .card-arrow {
            opacity: 0;
            transition: all 0.2s ease;
            color: var(--econ-ark-blue);
        }
        
        /* Footer - matching main site */
        .footer {
            padding: 5rem 0 4.5rem 0;
            background-color: #1f476b0f;
            margin: 4rem 0 0 0;
            border-top: 1px solid var(--econ-ark-blue);
        }
        
        .footer .sponsor a {
            border: 0 !important;
        }
        
        .footer .sponsor img {
            max-width: 100%;
        }
        
        /* Custom slider styling */
        .slider {
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 3px;
            background: var(--econ-ark-border-gray);
            outline: none;
        }
        
        /* Section title styling */
        .section-title { 
            position: relative; 
            padding-bottom: 0.75rem; 
            margin-bottom: 2rem;
            border-bottom: 3px solid currentColor;
            color: #1e293b;
        }


        /* Markdown content styling */
        .markdown-content h1 {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--econ-ark-heading-text);
        }
        
        .markdown-content h2 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.75rem;
            color: var(--ark-lightblue);
        }
        
        .markdown-content h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--ark-green);
        }
        
        .markdown-content ul {
            list-style-type: disc;
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .markdown-content li {
            margin-bottom: 0.25rem;
        }
        
        .markdown-content em {
            font-style: italic;
            color: var(--econ-ark-body-text);
            font-size: 0.9rem;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--econ-ark-blue);
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--econ-ark-blue);
            cursor: pointer;
            border: none;
        }

        /* Button/link styles from main site */
        .link {
            margin: 0;
        }
        
        .link a,
        a.button {
            display: inline-block;
            color: var(--econ-ark-blue);
            text-decoration: none;
            border: 2px solid var(--econ-ark-blue);
            padding: 0.25rem 0.5rem;
            font-weight: 500;
        }
        
        .link a:hover,
        a.button:hover {
            background-color: var(--econ-ark-blue);
            color: #fff !important;
        }
        
        /* Pill button styles from brand guide */
        .btn-pill {
            border-radius: 9999px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            transition: all 0.2s ease;
            border: 2px solid;
        }
        .btn-pill:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Hero section styles from the brand guide */
        .hero-hank {
            background: linear-gradient(135deg, #1f476b 0%, #005b8f 100%); /* Softer, linear gradient */
            color: #fff;
            padding: 3rem 1.5rem; /* Reduced padding */
        }
        .btn-pill.primary {
            background: #22d3ee; /* A bright cyan */
            color: #0f172a; /* A dark blue for text */
        }
        .btn-pill.secondary {
            background: transparent;
            border: 2px solid #fff;
            color: #fff;
        }

        /* Enhanced fade-in on scroll animation with more prominent effect */
        @media (prefers-reduced-motion: no-preference) {
            .fade-in-section {
                opacity: 0;
                transform: translateY(40px);
                transition: opacity 0.8s ease-out, transform 0.8s ease-out;
                will-change: opacity, transform;
            }

            .fade-in-section.is-visible {
                opacity: 1;
                transform: translateY(0);
            }
            
            /* Staggered animations for subsections */
            .fade-in-subsection {
                opacity: 0;
                transform: translateY(30px);
                transition: opacity 0.6s ease-out, transform 0.6s ease-out;
                will-change: opacity, transform;
            }
            
            .fade-in-subsection.is-visible {
                opacity: 1;
                transform: translateY(0);
            }
            
            /* Delay for sequential fade-ins */
            .fade-in-subsection:nth-child(1) { transition-delay: 0.1s; }
            .fade-in-subsection:nth-child(2) { transition-delay: 0.2s; }
            .fade-in-subsection:nth-child(3) { transition-delay: 0.3s; }
            .fade-in-subsection:nth-child(4) { transition-delay: 0.4s; }
            .fade-in-subsection:nth-child(5) { transition-delay: 0.5s; }
        }

        /* Styles for the new insights graphic */
        .insights-card {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1.5rem;
        }
        .insights-card h4 {
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 1rem;
        }
        .transmission-path {
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
        }
        .transmission-path .icon {
            color: #005b8f;
            font-size: 1.25rem;
            width: 30px;
            text-align: center;
        }
        .transmission-path .arrow {
            color: #94a3b8;
            margin: 0 0.5rem;
        }
        .transmission-path .label {
            color: #475569;
        }

        /* Animated channels cards */
        .channels-diagram .grid > div {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        #bewley-basics.is-visible .channels-diagram .grid > div {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        #bewley-basics.is-visible .channels-diagram .grid > div:nth-child(1) {
            transition-delay: 0.1s;
        }
        #bewley-basics.is-visible .channels-diagram .grid > div:nth-child(2) {
            transition-delay: 0.4s;
        }

        /* Styling for implications list loaded from markdown */
        #implications-content h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--econ-ark-heading-text);
            text-align: center;
            margin-bottom: 1.5rem;
        }
        #implications-content ul {
            list-style: none;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        #implications-content li {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--econ-ark-body-text);
        }
        #implications-content li i.fa-fw {
            color: var(--econ-ark-blue);
            margin-right: 0.5rem;
        }

        /* Enhanced section polishing with more spacing */
        main.col-span-9 > section {
            padding-top: 6rem;
            padding-bottom: 6rem;
            padding-left: 3rem;
            padding-right: 3rem;
        }
        main.col-span-9 > section:nth-of-type(even) {
            background-color: #fff;
        }
        
        /* Remove top blank space above main title */
        main.col-span-9 > section:first-child {
            padding-top: 0;
        }

        /* Interactive Solver Component */
        .solver-tabs {
            display: flex;
            justify-content: center;
            border-bottom: 2px solid var(--econ-ark-border-gray);
            margin-bottom: 2rem;
        }
        .solver-tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--econ-ark-body-text);
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
            margin-bottom: -2px; /* Overlap with container border */
        }
        .solver-tab:hover {
            color: var(--econ-ark-blue);
            background-color: var(--econ-ark-light-gray);
        }
        .solver-tab.active {
            color: var(--econ-ark-blue);
            border-bottom-color: var(--econ-ark-blue);
        }
        .solver-pane {
            display: none;
        }
        .solver-pane.active {
            display: block;
        }
        
        /* Hover effect for wealth group details */
        .wealth-group {
            position: relative;
        }
        
        .wealth-group-details {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            background: white;
            border: 1px solid #e0f2fe;
            border-radius: 0.375rem;
            padding: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            z-index: 10;
            margin-top: 0.5rem;
            white-space: nowrap;
        }
        
        .wealth-group:hover .wealth-group-details {
            opacity: 1;
            visibility: visible;
        }
        
        /* Timeline styling */
        .timeline-item.active .timeline-dot {
            background-color: #0284c7;
            border-color: #0284c7;
            transform: translateX(-50%) scale(1.5);
        }
        
        .timeline-item.active {
            transform: translateX(4px);
        }
        
        .timeline-item.active .font-bold {
            color: #0284c7;
        }
        
        /* Details/Summary styling */
        details summary::-webkit-details-marker {
            display: none;
        }
        
        /* Typing cursor for code animation */
        .type-cursor {
            animation: blink 1s step-end infinite;
            color: #38bdf8;
            font-weight: bold;
        }
        
        @keyframes blink {
            50% { opacity: 0; }
        }
        
        /* Code block animations */
        @keyframes fadeInLine {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes typewriter {
            from {
                width: 0;
            }
            to {
                width: 100%;
            }
        }
        
        .code-line {
            opacity: 0;
            animation: fadeInLine 0.5s ease-out forwards;
        }
        
        .code-highlight {
            position: relative;
            background: linear-gradient(90deg, rgba(56, 189, 248, 0.1) 0%, rgba(56, 189, 248, 0) 100%);
            animation: highlightSweep 0.8s ease-out;
        }
        
        @keyframes highlightSweep {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }
        
        /* Typing cursor effect */
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #38bdf8;
            font-weight: bold;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        details[open] summary {
            color: #0284c7;
        }
        
        details summary::before {
            content: '\f0da';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            margin-right: 0.5rem;
            transition: transform 0.3s ease;
            display: inline-block;
        }
        
        details[open] summary::before {
            transform: rotate(90deg);
        }
        
        /* Section-specific heading colors using Econ-ARK palette */
        #bewley-basics .section-title,
        #bewley-basics h2,
        #bewley-basics h3 {
            color: #00aeef !important;
        }
        
        #interactive-dashboards .section-title,
        #interactive-dashboards h2 {
            color: #ed217c !important;
        }
        
        #notebooks .section-title,
        #notebooks h2,
        #notebooks h3 {
            color: #39b54a !important;
        }
        
        #tools .section-title,
        #tools h2 {
            color: #ff8a00 !important;
        }
        
        #replications .section-title,
        #replications h2 {
            color: #00aeef !important;
        }
        
        #building-bewley .section-title {
            color: #ff8a00 !important;
        }
        
        #building-bewley h3 {
            color: #ff8a00 !important;
        }
        
        /* Special styling for key subheadings */
        h3.text-2xl.font-bold {
            color: #39b54a !important;
        }
        
        /* Timeline heading */
        #timeline-content h4 {
            color: #00aeef !important;
        }
        
        /* Dashboard key results */
        .font-bold[style*="color: var(--econ-ark-blue)"] {
            color: var(--ark-lightblue) !important;
        }
        
        .font-bold[style*="color: var(--econ-ark-orange)"] {
            color: var(--journey-accent) !important;
        }
        
        .font-bold[style*="color: var(--econ-ark-red)"] {
            color: var(--ark-pink) !important;
        }
        
        /* Icon colors to match */
        .fas.text-sky-600,
        i.text-sky-600 {
            color: #00aeef !important;
        }
        
        .fas.text-orange-500,
        .fas.text-orange-600,
        i.text-orange-500,
        i.text-orange-600 {
            color: #ff8a00 !important;
        }
        
        .fas.text-emerald-600,
        i.text-emerald-600 {
            color: #39b54a !important;
        }
    </style>
</head>
<body class="bg-white">
    <!-- Header -->
    <header class="header">
        <a title="Toggle navigation" id="toggleNav" class="toggle-nav"><i class="fas fa-bars"></i></a>
        <div class="container">
            <p class="site-logo"><a href="/"><img src="/assets/img/econ-ark-logo-white.png"></a></p>
            <nav class="navigation">
                <ul>
                    <li><a href="/journeys/">Journeys</a></li>
                    <li><a href="/materials/">Materials</a></li>
                    <li><a href="/team/">Team</a></li>
                    <li><a href="https://docs.econ-ark.org">Docs</a></li>
                    <li><a href="https://github.com/econ-ark">GitHub</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container mx-auto px-6 pt-2 pb-8" style="max-width: 1200px;">
        <div class="grid grid-cols-12 gap-8">
            <!-- Sidebar Navigation -->
            <nav class="col-span-3 sidebar">
                <div class="space-y-2">
                    <a href="#overview" class="block px-4 py-2 text-sm font-medium">Overview</a>
                    <a href="#bewley-basics" class="block px-4 py-2 text-sm font-medium">Bewley Model Basics</a>
                    <a href="#interactive-dashboards" class="block px-4 py-2 text-sm font-medium">Interactive Dashboards</a>
                    <a href="#building-bewley" class="block px-4 py-2 text-sm font-medium">Build with Econ-ARK</a>
                    <a href="#notebooks" class="block px-4 py-2 text-sm font-medium">Notebooks</a>
                    <a href="#tools" class="block px-4 py-2 text-sm font-medium">Tools</a>
                    <a href="#replications" class="block px-4 py-2 text-sm font-medium">Replications</a>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-span-9">
                <!-- Section 2: Overview -->
                <section id="overview" class="space-y-8 fade-in-section">
                    <div class="max-w-4xl mb-12">
                        <span class="text-sm font-semibold uppercase tracking-wider text-[#005B8F]">Econ-ARK Journey</span>
                        <div id="overview-content" class="mt-4">
                            <!-- Content will be loaded from markdown -->
                        </div>
                    </div>
                    
                    <div class="grid lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2">
                            <div id="overview-main-text" class="space-y-4 text-lg text-slate-600">
                                <!-- Main text will be loaded from markdown -->
                            </div>
                        </div>
                        
                        <div>
                            <div class="bg-[#F8FAFC] border border-slate-200 p-6 rounded-lg">
                                <div id="bewley-model-content">
                                    <!-- Bewley model content will be loaded from markdown -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 mt-8">
                        <div class="bg-[#F8FAFC] border border-slate-200 rounded-lg overflow-hidden">
                            <div class="grid grid-cols-12">
                                <div class="col-span-5">
                                    <img src="/assets/img/journeys/delphi1.jpg" 
                                         alt="The Athenian Treasury at Delphi, an ancient Greek temple with Doric columns representing foundational economic models." 
                                         class="journey-image-panel w-full" 
                                         style="display: block; min-height: 200px; height: 100%; object-fit: cover; filter: saturate(0.5) contrast(1.1);">
                                </div>
                                <div class="col-span-7 p-6">
                                    <h3 class="text-xl font-bold text-slate-800 mb-4">Sections in the Roadmap</h3>
                                    <ul class="list-none space-y-3">
                                        <li class="flex items-center">
                                            <i class="fas fa-map-signs fa-fw mr-3" style="color: var(--ark-lightblue);"></i>
                                            <a href="#bewley-basics" class="text-slate-600 hover:underline">Model Basics</a>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-tachometer-alt fa-fw mr-3" style="color: var(--ark-pink);"></i>
                                            <a href="#interactive-dashboards" class="text-slate-600 hover:underline">Interactive Dashboards</a>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-book fa-fw mr-3" style="color: var(--ark-green);"></i>
                                            <a href="#notebooks" class="text-slate-600 hover:underline">Notebooks</a>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-code fa-fw mr-3" style="color: var(--ark-orange);"></i>
                                            <a href="#building-bewley" class="text-slate-600 hover:underline">Build with Econ-ARK</a>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-tools fa-fw mr-3" style="color: var(--journey-accent);"></i>
                                            <a href="#tools" class="text-slate-600 hover:underline">Main Tools</a>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-copy fa-fw mr-3" style="color: var(--ark-lightblue);"></i>
                                            <a href="#replications" class="text-slate-600 hover:underline">Replications</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 3: Bewley Model Basics -->
                <section id="bewley-basics" class="py-8 fade-in-section">
                    <div class="max-w-4xl mx-auto text-center">
                        <h2 class="section-title text-3xl font-bold tracking-tight text-slate-900" style="text-align: left;">Bewley Model Basics</h2>
                        <div id="bewley-basics-intro" class="text-justify mt-8">
                            <!-- Content will be loaded from markdown -->
                        </div>
                    </div>
                    
                    <div class="space-y-8 mt-12">
                        <!-- Channels Diagram -->
                        <div class="channels-diagram fade-in-subsection">
                            <div class="grid md:grid-cols-2 gap-8 items-stretch">
                                <div class="bg-slate-50 border border-slate-200 rounded-lg p-6 text-center flex flex-col">
                                    <h4 class="font-bold text-slate-800 mb-4">Monetary Policy in a Representative-Agent Model</h4>
                                    <div class="flex-grow flex flex-col items-center justify-center space-y-3">
                                        <div class="text-4xl text-slate-600"><i class="fas fa-landmark"></i></div>
                                        <div class="text-xl text-slate-400">&darr;</div>
                                        <div class="font-mono text-sm bg-slate-200 px-2 py-1 rounded">Interest Rate &darr;</div>
                                        <div class="text-xl text-slate-400">&darr;</div>
                                        <div class="text-4xl text-slate-600"><i class="fas fa-user"></i></div>
                                        <p class="mt-2 text-slate-600 font-semibold">Intertemporal Substitution</p>
                                        <p class="text-xs text-slate-500">One agent saves more.</p>
                                    </div>
                                </div>
                                <div class="bg-sky-50 border border-sky-200 rounded-lg p-6 flex flex-col">
                                    <h4 class="font-bold text-sky-800 mb-4 text-center">Monetary Policy in a Heterogeneous-Agent Model</h4>
                                    <div class="flex-grow flex flex-col items-center justify-center space-y-3">
                                        <div class="text-4xl text-sky-600"><i class="fas fa-landmark"></i></div>
                                        <div class="text-xl text-sky-400">&darr;</div>
                                        <div class="font-mono text-sm bg-sky-200 px-2 py-1 rounded">Interest Rate &darr;</div>
                                        <div class="text-xl text-sky-400">&darr;</div>
                                        <div class="grid md:grid-cols-3 gap-4 w-full pt-4 items-stretch">
                                            <div class="text-center flex flex-col wealth-group">
                                                <div class="flex-grow">
                                                    <div class="text-3xl text-sky-600"><i class="fas fa-user-clock"></i></div>
                                                    <p class="mt-2 font-semibold text-sky-900">Low-Wealth</p>
                                                    <p class="text-xs text-slate-500 mb-3">High MPC; respond to income</p>
                                                </div>
                                                <ul class="space-y-1 text-left text-xs text-sky-900 inline-block wealth-group-details">
                                                    <li class="flex items-center"><i class="fas fa-briefcase w-4 text-center text-sky-500 mr-2"></i>Labour Income</li>
                                                    <li class="flex items-center"><i class="fas fa-hand-holding-usd w-4 text-center text-sky-500 mr-2"></i>Cash-Flow</li>
                                                </ul>
                                            </div>
                                            <div class="text-center flex flex-col wealth-group">
                                                <div class="flex-grow">
                                                    <div class="text-3xl text-sky-600"><i class="fas fa-user-shield"></i></div>
                                                    <p class="mt-2 font-semibold text-sky-900">Middle-Wealth</p>
                                                    <p class="text-xs text-slate-500 mb-3">Precautionary motive stifles response</p>
                                                </div>
                                                <ul class="space-y-1 text-left text-xs text-sky-900 inline-block wealth-group-details">
                                                    <li class="flex items-center"><i class="fas fa-piggy-bank w-4 text-center text-sky-500 mr-2"></i>Buffer-Stock Savings</li>
                                                </ul>
                                            </div>
                                            <div class="text-center flex flex-col wealth-group">
                                                <div class="flex-grow">
                                                    <div class="text-3xl text-sky-600"><i class="fas fa-user-plus"></i></div>
                                                    <p class="mt-2 font-semibold text-sky-900">High-Wealth</p>
                                                    <p class="text-xs text-slate-500 mb-3">Low MPC; respond to prices</p>
                                                </div>
                                                <ul class="space-y-1 text-left text-xs text-sky-900 inline-block wealth-group-details">
                                                    <li class="flex items-center"><i class="fas fa-coins w-4 text-center text-sky-500 mr-2"></i>Interest Income</li>
                                                    <li class="flex items-center"><i class="fas fa-chart-line w-4 text-center text-sky-500 mr-2"></i>Asset Prices</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="implications-content" class="mt-8 fade-in-subsection">
                            <!-- Content will be loaded from markdown -->
                        </div>
                        <!-- Historical Perspective -->
                        <div class="bg-slate-50 rounded-lg mt-8 fade-in-subsection" style="box-shadow: 0 1px 3px rgba(0,0,0,.08);">
                            <details>
                                <summary class="cursor-pointer p-8 font-bold text-slate-800 hover:text-sky-700 transition-colors">
                                    <i class="fas fa-history mr-3 text-sky-600"></i>Historical Perspective
                                </summary>
                                <div class="px-8 pb-8">
                                    <div class="grid md:grid-cols-2 gap-6">
                                        <div class="relative bg-white rounded-lg p-6" style="box-shadow: 0 1px 3px rgba(0,0,0,.05);">
                                            <!-- Timeline Line -->
                                            <div class="absolute left-8 top-10 bottom-10 w-0.5 bg-sky-200"></div>
                                            <div class="space-y-8">
                                                <div class="timeline-item relative flex items-start cursor-pointer hover:translate-x-1 transition-transform" data-year="1950s">
                                                    <div class="timeline-dot absolute left-8 w-4 h-4 rounded-full bg-white border-2 border-sky-400 transform -translate-x-1/2 mt-0.5 hover:scale-125 transition-transform"></div>
                                                    <div class="ml-14">
                                                        <div class="font-bold text-slate-800">1950s</div>
                                                        <div class="text-sm text-slate-600">Foundations: PIH & LCH</div>
                                                    </div>
                                                </div>
                                                <div class="timeline-item relative flex items-start cursor-pointer hover:translate-x-1 transition-transform" data-year="1977">
                                                    <div class="timeline-dot absolute left-8 w-4 h-4 rounded-full bg-white border-2 border-sky-400 transform -translate-x-1/2 mt-0.5 hover:scale-125 transition-transform"></div>
                                                    <div class="ml-14">
                                                        <div class="font-bold text-slate-800">1977</div>
                                                        <div class="text-sm text-slate-600">The Bewley Model</div>
                                                    </div>
                                                </div>
                                                <div class="timeline-item relative flex items-start cursor-pointer hover:translate-x-1 transition-transform" data-year="1989-1992">
                                                    <div class="timeline-dot absolute left-8 w-4 h-4 rounded-full bg-white border-2 border-sky-400 transform -translate-x-1/2 mt-0.5 hover:scale-125 transition-transform"></div>
                                                    <div class="ml-14">
                                                        <div class="font-bold text-slate-800">1989-92</div>
                                                        <div class="text-sm text-slate-600">First Quantitative Models</div>
                                                    </div>
                                                </div>
                                                <div class="timeline-item relative flex items-start cursor-pointer hover:translate-x-1 transition-transform" data-year="1994">
                                                    <div class="timeline-dot absolute left-8 w-4 h-4 rounded-full bg-white border-2 border-sky-400 transform -translate-x-1/2 mt-0.5 hover:scale-125 transition-transform"></div>
                                                    <div class="ml-14">
                                                        <div class="font-bold text-slate-800">1994</div>
                                                        <div class="text-sm text-slate-600">General Equilibrium</div>
                                                    </div>
                                                </div>
                                                <div class="timeline-item relative flex items-start cursor-pointer hover:translate-x-1 transition-transform" data-year="1998">
                                                    <div class="timeline-dot absolute left-8 w-4 h-4 rounded-full bg-white border-2 border-sky-400 transform -translate-x-1/2 mt-0.5 hover:scale-125 transition-transform"></div>
                                                    <div class="ml-14">
                                                        <div class="font-bold text-slate-800">1998</div>
                                                        <div class="text-sm text-slate-600">Krusell-Smith</div>
                                                    </div>
                                                </div>
                                                <div class="timeline-item relative flex items-start cursor-pointer hover:translate-x-1 transition-transform" data-year="2010s">
                                                    <div class="timeline-dot absolute left-8 w-4 h-4 rounded-full bg-white border-2 border-sky-400 transform -translate-x-1/2 mt-0.5 hover:scale-125 transition-transform"></div>
                                                    <div class="ml-14">
                                                        <div class="font-bold text-slate-800">2010s-Now</div>
                                                        <div class="text-sm text-slate-600">Modern HANK</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-white rounded-lg p-8 flex items-center" style="box-shadow: 0 1px 3px rgba(0,0,0,.05);">
                                            <div id="timeline-content" class="w-full">
                                                <h4 class="font-bold mb-4 text-xl text-sky-700">Select a milestone to learn more</h4>
                                                <p class="text-sm text-slate-600 leading-relaxed text-justify">Click on any year in the timeline to explore the key developments in heterogeneous agent modeling that led to today's powerful HANK frameworks.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </details>
                        </div>
                    </div>

                    <!-- Computing Bewley Models -->
                    <div class="space-y-8 pt-8 fade-in-subsection">
                        <h3 class="text-2xl font-bold tracking-tight text-slate-800">Computing Bewley Models</h3>
                        
                        <div id="computing-bewley-intro" class="text-slate-600 max-w-3xl mt-4 mx-auto text-justify">
                            <!-- Content will be loaded from markdown -->
                        </div>

                                                    <!-- Circular Flow Diagram -->
                            <div class="mt-16 mb-8 max-w-5xl mx-auto">
                                <!-- Arrowhead definition -->
                                <svg class="absolute w-0 h-0" aria-hidden="true">
                                    <defs>
                                        <marker id="arrowhead-flow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5" orient="auto">
                                            <path d="M0 0L10 5L0 10Z" fill="#334155" />
                                        </marker>
                                    </defs>
                                </svg>

                                <!-- Main Flow with Feedback -->
                                <div class="relative pb-16">
                                    <div class="grid grid-cols-[1fr_auto_120px_auto_0.8fr_auto_0.8fr] items-center gap-x-2 gap-y-10">
                                        <!-- Households -->
                                        <div class="bg-white border border-slate-200 rounded-xl shadow-sm p-4 text-center" id="households-box">
                                            <div class="text-3xl text-sky-600 mb-2"><i class="fas fa-home"></i></div>
                                            <h4 class="font-bold text-slate-800 mb-1">Households</h4>
                                            <p class="text-xs text-slate-500">Optimize<br />consume &amp; save</p>
                                        </div>

                                        <!-- Arrow → -->
                                        <svg class="w-14 h-6 mx-auto" viewBox="0 0 48 24">
                                            <line x1="0" y1="12" x2="48" y2="12" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-flow)" />
                                        </svg>

                                        <!-- Distributions -->
                                        <div class="flex flex-col items-center">
                                            <svg width="120" height="70" viewBox="0 0 120 70" aria-hidden="true">
                                                <!-- Distribution 1: Earliest time period -->
                                                <path d="M5 65 Q 20 65, 28 45 T 44 25 Q 52 15, 60 20 T 76 35 Q 84 45, 92 55 T 108 65 L 5 65 Z" 
                                                      fill="rgba(0,91,143,0.1)" />
                                                
                                                <!-- Distribution 2: Shifting right -->
                                                <path d="M8 65 Q 24 65, 34 48 T 50 28 Q 58 18, 66 22 T 82 37 Q 90 47, 100 57 T 112 65 L 8 65 Z" 
                                                      fill="rgba(0,91,143,0.15)" />
                                                
                                                <!-- Distribution 3: Further shift -->
                                                <path d="M12 65 Q 28 65, 38 50 T 54 30 Q 62 20, 70 25 T 86 40 Q 94 50, 105 60 T 115 65 L 12 65 Z" 
                                                      fill="rgba(0,91,143,0.2)" />
                                                
                                                <!-- Distribution 4: More concentration in tail -->
                                                <path d="M16 65 Q 32 65, 42 52 T 58 32 Q 66 22, 74 27 T 90 42 Q 98 52, 110 61 T 118 65 L 16 65 Z" 
                                                      fill="rgba(0,91,143,0.25)" />
                                                
                                                <!-- Distribution 5: Current period with longest tail -->
                                                <path d="M20 65 Q 36 65, 44 54 T 60 34 Q 68 24, 76 29 T 92 44 Q 100 54, 113 62 T 120 65 L 20 65 Z" 
                                                      fill="rgba(0,91,143,0.3)" />
                                            </svg>
                                            <span class="text-xs text-slate-500 mt-1 font-medium">Distributions of<br/>savings, labour, consumption</span>
                                        </div>

                                        <!-- Arrow → -->
                                        <svg class="w-14 h-6 mx-auto" viewBox="0 0 48 24">
                                            <line x1="0" y1="12" x2="48" y2="12" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-flow)" />
                                        </svg>

                                        <!-- Markets -->
                                        <div class="bg-white border border-slate-200 rounded-xl shadow-sm p-4 text-center" id="markets-box">
                                            <div class="text-3xl text-orange-500 mb-2"><i class="fas fa-chart-line"></i></div>
                                            <h4 class="font-bold text-slate-800 mb-1">Markets</h4>
                                            <p class="text-xs text-slate-500">Aggregate<br />wages &amp; prices</p>
                                        </div>

                                        <!-- Arrow → -->
                                        <svg class="w-14 h-6 mx-auto" viewBox="0 0 48 24">
                                            <line x1="0" y1="12" x2="48" y2="12" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-flow)" />
                                        </svg>

                                        <!-- Firms -->
                                        <div class="bg-white border border-slate-200 rounded-xl shadow-sm p-4 text-center">
                                            <div class="text-3xl text-emerald-600 mb-2"><i class="fas fa-industry"></i></div>
                                            <h4 class="font-bold text-slate-800 mb-1">Firms</h4>
                                            <p class="text-xs text-slate-500">Invest &amp; hire</p>
                                        </div>
                                    </div>

                                    <!-- Feedback Arrow (Markets → Households) -->
                                    <div class="absolute bottom-0 left-0 w-full" style="transform: translateY(10px);">
                                        <svg class="w-full" height="80" viewBox="0 0 1000 80" preserveAspectRatio="none">
                                            <defs>
                                                <marker id="arrowhead-prices" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="5" markerHeight="5" orient="auto">
                                                    <path d="M0 0L10 5L0 10Z" fill="#334155" />
                                                </marker>
                                            </defs>
                                            <!-- Text label "Prices" -->
                                            <text x="350" y="40" text-anchor="middle" font-size="10" fill="#64748b" font-family="system-ui, -apple-system, sans-serif" class="text-xs font-medium">Prices</text>
                                            <!-- Path from Markets (at ~571) down and back to Households (at ~143) -->
                                            <!-- Extended outward: Markets to 650, Households to 100 -->
                                            <path d="M 650 10 L 650 55 L 100 55 L 100 10" 
                                                  stroke="#334155" 
                                                  stroke-width="2" 
                                                  fill="none"
                                                  stroke-dasharray="4 4" 
                                                  marker-end="url(#arrowhead-prices)" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        
                        <!-- Description of Econ-ARK tools -->
                        <p class="text-justify text-slate-600 mt-12 max-w-3xl mx-auto">
                            Econ-ARK provides modular, open-source implementations of each component in this circular flow, from household optimization algorithms to market aggregation methods. 
                            The toolkit's computational efficiency enables researchers to solve complex heterogeneous agent models where distributions of wealth and income matter for aggregate outcomes.
                        </p>

                        <!-- Interactive Solver Component -->
                        <div id="interactive-solver" class="mt-8">
                            <div class="solver-tabs">
                                <div class="solver-tab active" data-tab="micro-problem">Dynamic Micro Problem</div>
                                <div class="solver-tab" data-tab="micro-simulation">Micro Simulation</div>
                                <div class="solver-tab" data-tab="estimation">Estimation</div>
                                <div class="solver-tab" data-tab="ge-solver">General Equilibrium</div>
                            </div>

                            <!-- Panes -->
                            <div class="mt-6">
                                <div class="solver-pane active" id="micro-problem">
                                    <p class="text-center text-sm text-slate-600 mb-6 italic">First, solve the household's dynamic optimization problem using one of Econ-ARK's industry-standard methods:</p>
                                    <div class="grid md:grid-cols-3 gap-6 text-center">
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-arrow-right text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">Endogenous Grid Method</h4>
                                            <p class="text-xs text-slate-500 mt-2 leading-relaxed">An efficient and accurate method for consumption problems with liquidity constraints.</p>
                                        </div>
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-chart-line text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">Value Function Iteration</h4>
                                            <p class="text-xs text-slate-500 mt-2 leading-relaxed">A robust and general-purpose method for solving dynamic programming problems.</p>
                                        </div>
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-cogs text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">Coleman-Reffett Operator</h4>
                                            <p class="text-xs text-slate-500 mt-2 leading-relaxed">An approach that iterates on the policy rule itself, often using interpolation.</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="solver-pane" id="micro-simulation">
                                    <p class="text-center text-sm text-slate-600 mb-6 italic">Next, use the solved policy functions to simulate the decisions of a large population of households over time:</p>
                                    <div class="grid md:grid-cols-1 gap-6 text-center">
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6 max-w-md mx-auto">
                                            <i class="fas fa-users-cog text-2xl text-orange-600 mb-3"></i>
                                            <h4 class="font-bold">Simulate Distribution</h4>
                                            <p class="text-xs text-slate-500 mt-2">Generate a time series of aggregate variables (C, S, L) from the microeconomic decisions.</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="solver-pane" id="estimation">
                                    <p class="text-center text-sm text-slate-600 mb-6 italic">The toolkit's speed unlocks modern estimation techniques, allowing models to be disciplined with rich micro-data:</p>
                                    <div class="grid md:grid-cols-3 gap-6 text-center">
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-database text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">Micro-data Calibration</h4>
                                            <p class="text-xs text-slate-500 mt-2">Use moments from household surveys (e.g., HFCS, SCF) to calibrate model parameters.</p>
                                        </div>
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-chart-pie text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">Likelihood-Based Methods</h4>
                                            <p class="text-xs text-slate-500 mt-2">Use SSJ for fast, formal estimation (SMM, MLE).</p>
                                        </div>
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-file-invoice-dollar text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">New Data Frontiers</h4>
                                            <p class="text-xs text-slate-500 mt-2">Leverage high-frequency administrative data.</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="solver-pane" id="ge-solver">
                                    <p class="text-center text-sm text-slate-600 mb-6 italic">Finally, find the general equilibrium using one of Econ-ARK's modular solvers:</p>
                                    <div class="grid md:grid-cols-3 gap-6 text-center">
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-bolt text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">Sequence-Space Jacobian</h4>
                                            <p class="text-xs text-slate-500 mt-2">A fast, linear solver for calculating impulse responses. <a href="https://github.com/econ-ark/SSJTOOLKIT" class="text-sky-600 hover:underline">[docs]</a></p>
                                        </div>
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-project-diagram text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">Krusell–Smith</h4>
                                            <p class="text-xs text-slate-500 mt-2">A non-linear method that approximates the aggregate law of motion.</p>
                                        </div>
                                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                                            <i class="fas fa-cogs text-2xl text-sky-600 mb-3"></i>
                                            <h4 class="font-bold">Direct Iteration</h4>
                                            <p class="text-xs text-slate-500 mt-2">A fully non-linear benchmark method.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 4: Interactive Dashboards -->
                <section id="interactive-dashboards" class="space-y-8 py-8 fade-in-section">
                    <h2 class="section-title text-3xl font-bold tracking-tight text-slate-900">Interactive Dashboards</h2>
                    <div id="interactive-dashboards-intro" class="text-slate-600 mb-6 max-w-3xl text-justify">
                        <!-- Content will be loaded from markdown -->
                    </div>
                    
                    <!-- Tabs -->
                    <div class="border-b border-gray-200">
                        <nav class="flex space-x-8">
                            <button class="tab px-4 py-2 font-medium border-b-2 border-transparent" data-tab="pandemic-modeling">
                                Pandemic Policy Response
                            </button>
                            <button class="tab px-4 py-2 font-medium border-b-2 border-transparent" data-tab="impulse-response">
                                Impulse Response
                            </button>
                            <button class="tab px-4 py-2 font-medium border-b-2 border-transparent" data-tab="wealth-distribution">
                                Wealth Distribution
                            </button>
                        </nav>
                    </div>
                    
                    <!-- Dashboard 2: Impulse Response -->
                    <div id="impulse-response" class="dashboard hidden">
                        <div class="grid grid-cols-2 gap-8">
                            <div>
                                <canvas id="impulse-chart" width="400" height="300"></canvas>
                            </div>
                            <div class="space-y-6">
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Fiscal Shock Size</label>
                                        <input type="range" id="shock-size" class="slider w-full" min="0.1" max="2" step="0.1" value="1">
                                        <div class="text-xs text-gray-500 mt-1">Current: <span id="shock-value">1.0</span></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Household Impatience</label>
                                        <input type="range" id="impatience" class="slider w-full" min="0.8" max="0.99" step="0.01" value="0.95">
                                        <div class="text-xs text-gray-500 mt-1">Current: <span id="impatience-value">0.95</span></div>
                                    </div>
                                </div>
                                <div class="p-4 border rounded-lg" style="border-color: var(--econ-ark-blue);">
                                    <h4 class="font-bold mb-2" style="color: var(--econ-ark-blue);">Key Result</h4>
                                    <p class="text-sm">Peak Response: <span id="peak-response" class="font-bold">-</span>%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Dashboard 3: Wealth Distribution -->
                    <div id="wealth-distribution" class="dashboard hidden">
                        <div class="grid grid-cols-2 gap-8">
                            <div>
                                <canvas id="wealth-chart" width="400" height="300"></canvas>
                            </div>
                            <div class="space-y-6">
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Wealth Inequality (Gini)</label>
                                        <input type="range" id="gini" class="slider w-full" min="0.2" max="0.8" step="0.01" value="0.5">
                                        <div class="text-xs text-gray-500 mt-1">Current: <span id="gini-value">0.50</span></div>
                                    </div>
                                </div>
                                <div class="p-4 border rounded-lg" style="border-color: var(--econ-ark-orange);">
                                    <h4 class="font-bold mb-2" style="color: var(--econ-ark-orange);">Key Result</h4>
                                    <p class="text-sm">Top 10% Share: <span id="top-10-share" class="font-bold">-</span>%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Dashboard 1: Pandemic Policy Response -->
                    <div id="pandemic-modeling" class="dashboard hidden">
                        <div class="grid grid-cols-2 gap-8">
                            <!-- Charts Column -->
                            <div class="space-y-8">
                                <div>
                                    <canvas id="unemployment-chart" width="400" height="250"></canvas>
                                </div>
                                <div>
                                    <canvas id="consumption-chart" width="400" height="250"></canvas>
                                </div>
                                <div>
                                    <canvas id="stimulus-chart" width="400" height="250"></canvas>
                                </div>
                            </div>
                            
                            <!-- Controls Column -->
                            <div class="flex flex-col h-full space-y-6">
                                <div> <!-- Top group -->
                                    <div class="bg-sky-50 border border-sky-200 rounded-lg p-4">
                                        <h4 class="font-semibold text-sky-900 mb-2">Pandemic Response Model</h4>
                                        <p class="text-sm text-sky-800 text-justify">Based on <a href="http://econ-ark.github.io/Pandemic" class="text-sky-700 hover:text-sky-900 underline">Carroll et al. (2020)</a>. Adjust parameters to explore policy impacts.</p>
                                    </div>
                                
                                    <div class="bg-slate-50 border border-slate-200 rounded-lg p-4 mt-6">
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Spending Reduction During Lockdown</label>
                                                <input type="range" id="pandemic-spending" class="slider w-full" min="0.8" max="1.0" step="0.01" value="0.89">
                                                <div class="text-xs text-gray-500 mt-1">Current: <span id="pandemic-spending-value">0.89</span></div>
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Lockdown Duration (Quarters)</label>
                                                <input type="range" id="pandemic-duration" class="slider w-full" min="1.0" max="4.0" step="0.2" value="2.0">
                                                <div class="text-xs text-gray-500 mt-1">Current: <span id="pandemic-duration-value">2.0</span></div>
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Stimulus Amount ($1000s)</label>
                                                <input type="range" id="pandemic-stimulus" class="slider w-full" min="0.5" max="2.5" step="0.1" value="1.2">
                                                <div class="text-xs text-gray-500 mt-1">Current: <span id="pandemic-stimulus-value">1.2</span></div>
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Unemployment Benefits Bonus</label>
                                                <input type="range" id="pandemic-benefits" class="slider w-full" min="3.0" max="8.0" step="0.2" value="5.2">
                                                <div class="text-xs text-gray-500 mt-1">Current: <span id="pandemic-benefits-value">5.2</span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-auto"> <!-- Bottom aligned group -->
                                    <div class="p-4 border rounded-lg" style="border-color: var(--econ-ark-red);">
                                        <h4 class="font-bold mb-2" style="color: var(--econ-ark-red);">Key Results</h4>
                                        <p class="text-sm">Peak Unemployment: <span id="pandemic-peak-unemp" class="font-bold">-</span>%</p>
                                        <p class="text-sm">Consumption Drop: <span id="pandemic-consumption-drop" class="font-bold">-</span>%</p>
                                        <p class="text-sm">Policy Effectiveness: <span id="pandemic-policy-effect" class="font-bold">-</span>%</p>
                                    </div>
                                    
                                    <div class="text-center mt-6">
                                        <a href="https://mriduls.github.io/pandemic-voici/voici/render/dashboard.html" 
                                           target="_blank"
                                           class="btn-pill text-white hover:bg-opacity-90"
                                           style="background-color: var(--econ-ark-blue);">
                                            Full Interactive Dashboard
                                            <svg class="ml-2 -mr-1 w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section: Building with Econ-ARK -->
                <section id="building-bewley" class="space-y-8 py-8 fade-in-section">
                    <h2 class="section-title text-3xl font-bold tracking-tight">Build with Econ-ARK</h2>
                    <p class="text-slate-600 max-w-3xl mx-auto text-justify">
                        Econ-ARK streamlines the workflow for building Bewley models: define heterogeneous agents, compute the steady state, then use sequence-space Jacobians to analyze policy transmission. The code below shows how to go from model specification to quantitative policy analysis in a single script.
                    </p>

                    <!-- Stylised code snippet -->
                    <div class="relative max-w-5xl mx-auto">
                        <!-- Border wrapper with gradient -->
                        <div class="p-1 rounded-xl bg-gradient-to-r from-sky-400 to-blue-600">
                            <!-- Code block with lighter background -->
                            <div class="bg-slate-800 text-slate-100 text-sm rounded-lg overflow-hidden">
                                <!-- Header bar -->
                                <div class="bg-slate-700 px-4 py-2 flex items-center justify-between border-b border-slate-600">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <span class="text-xs text-slate-400 font-mono">bewley_workflow.py</span>
                                </div>
                                <!-- Code content -->
                                <div class="p-6 font-mono text-sm leading-relaxed overflow-auto" style="height: 600px; max-height: 600px;">
                                    <pre id="typed-code" class="language-python" style="margin: 0; min-height: 100%;"></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Step-by-Step Notebooks subsection -->
                    <div class="mt-16">
                        <h3 class="text-2xl font-bold tracking-tight text-slate-800 mb-4">Step-by-Step Learning Path</h3>
                        <p class="text-slate-600 max-w-3xl mx-auto text-justify mb-8">
                            Master HANK modeling through our comprehensive notebook series. Each notebook builds on the previous one, taking you from basic concepts to advanced policy analysis with sequence-space Jacobians.
                        </p>
                    
                    <div class="grid gap-6 max-w-5xl mx-auto">
                        <!-- Notebook 1: SSJ Explanation -->
                        <div class="bg-white border border-slate-200 rounded-lg p-6 hover:shadow-lg transition-shadow">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-sky-100 rounded-lg flex items-center justify-center">
                                        <span class="text-sky-600 font-bold text-lg">1</span>
                                    </div>
                                </div>
                                <div class="flex-grow">
                                    <h3 class="text-xl font-bold text-slate-800 mb-2">
                                        <a href="https://github.com/econ-ark/HARK/blob/master/examples/ConsNewKeynesianModel/SSJ_explanation.ipynb" 
                                           class="hover:text-sky-600 transition-colors" target="_blank">
                                            Understanding Sequence-Space Jacobians
                                        </a>
                                    </h3>
                                    <p class="text-slate-600 mb-3">
                                        Learn the mathematical foundations of SSJ methods and why they revolutionize solving heterogeneous agent models. 
                                        This notebook introduces the core concepts needed for all subsequent analysis.
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm text-slate-500">
                                        <span><i class="fas fa-clock"></i> 30 min</span>
                                        <span><i class="fas fa-signal"></i> Beginner</span>
                                        <span><i class="fas fa-tag"></i> Theory, SSJ</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notebook 2: Jacobian Example -->
                        <div class="bg-white border border-slate-200 rounded-lg p-6 hover:shadow-lg transition-shadow">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-sky-100 rounded-lg flex items-center justify-center">
                                        <span class="text-sky-600 font-bold text-lg">2</span>
                                    </div>
                                </div>
                                <div class="flex-grow">
                                    <h3 class="text-xl font-bold text-slate-800 mb-2">
                                        <a href="https://github.com/econ-ark/HARK/blob/master/examples/ConsNewKeynesianModel/Jacobian_Example.ipynb" 
                                           class="hover:text-sky-600 transition-colors" target="_blank">
                                            Computing Your First Jacobian
                                        </a>
                                    </h3>
                                    <p class="text-slate-600 mb-3">
                                        Hands-on tutorial computing Jacobians for a simple heterogeneous agent model. 
                                        See how shocks propagate through the economy and learn to interpret impulse responses.
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm text-slate-500">
                                        <span><i class="fas fa-clock"></i> 45 min</span>
                                        <span><i class="fas fa-signal"></i> Intermediate</span>
                                        <span><i class="fas fa-tag"></i> Computation, IRFs</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notebook 3: Transition Matrix -->
                        <div class="bg-white border border-slate-200 rounded-lg p-6 hover:shadow-lg transition-shadow">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-sky-100 rounded-lg flex items-center justify-center">
                                        <span class="text-sky-600 font-bold text-lg">3</span>
                                    </div>
                                </div>
                                <div class="flex-grow">
                                    <h3 class="text-xl font-bold text-slate-800 mb-2">
                                        <a href="https://github.com/econ-ark/HARK/blob/master/examples/ConsNewKeynesianModel/Transition_Matrix_Example.ipynb" 
                                           class="hover:text-sky-600 transition-colors" target="_blank">
                                            Transition Dynamics and Distribution Evolution
                                        </a>
                                    </h3>
                                    <p class="text-slate-600 mb-3">
                                        Explore how wealth and income distributions evolve over time. Master transition matrices 
                                        and understand the dynamics that drive inequality in heterogeneous agent models.
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm text-slate-500">
                                        <span><i class="fas fa-clock"></i> 60 min</span>
                                        <span><i class="fas fa-signal"></i> Intermediate</span>
                                        <span><i class="fas fa-tag"></i> Distributions, Dynamics</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notebook 4: KS-HARK -->
                        <div class="bg-white border border-slate-200 rounded-lg p-6 hover:shadow-lg transition-shadow">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                        <span class="text-orange-600 font-bold text-lg">4</span>
                                    </div>
                                </div>
                                <div class="flex-grow">
                                    <h3 class="text-xl font-bold text-slate-800 mb-2">
                                        <a href="https://github.com/econ-ark/HARK/blob/master/examples/ConsNewKeynesianModel/KS-HARK-presentation.ipynb" 
                                           class="hover:text-orange-600 transition-colors" target="_blank">
                                            The Krusell-Smith Method in HARK
                                        </a>
                                    </h3>
                                    <p class="text-slate-600 mb-3">
                                        Implement the classic Krusell-Smith algorithm for solving models with aggregate uncertainty. 
                                        Compare computational methods and understand when to use each approach.
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm text-slate-500">
                                        <span><i class="fas fa-clock"></i> 90 min</span>
                                        <span><i class="fas fa-signal"></i> Advanced</span>
                                        <span><i class="fas fa-tag"></i> Krusell-Smith, Aggregation</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notebook 5: HANK Fiscal -->
                        <div class="bg-white border border-slate-200 rounded-lg p-6 hover:shadow-lg transition-shadow">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                        <span class="text-red-600 font-bold text-lg">5</span>
                                    </div>
                                </div>
                                <div class="flex-grow">
                                    <h3 class="text-xl font-bold text-slate-800 mb-2">
                                        <a href="https://github.com/econ-ark/HARK/blob/master/examples/ConsNewKeynesianModel/HANKFiscal_example.ipynb" 
                                           class="hover:text-red-600 transition-colors" target="_blank">
                                            HANK Models with Fiscal Policy
                                        </a>
                                    </h3>
                                    <p class="text-slate-600 mb-3">
                                        Build a full HANK model with fiscal and monetary policy. Analyze the interaction between 
                                        government spending, taxes, and monetary policy in a heterogeneous agent framework.
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm text-slate-500">
                                        <span><i class="fas fa-clock"></i> 2 hours</span>
                                        <span><i class="fas fa-signal"></i> Advanced</span>
                                        <span><i class="fas fa-tag"></i> HANK, Policy Analysis</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Estimation Notebooks -->
                        <div class="mt-8 p-6 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg">
                            <h3 class="text-xl font-bold text-purple-800 mb-3">
                                <i class="fas fa-chart-line mr-2"></i>Advanced: Model Estimation
                            </h3>
                            <p class="text-purple-700 mb-4">
                                Ready to estimate HANK models with real data? Explore our 
                                <a href="https://github.com/econ-ark/HARK/tree/master/examples/ConsNewKeynesianModel/estimation" 
                                   class="font-semibold underline hover:text-purple-900" target="_blank">
                                    estimation notebooks
                                </a> 
                                for cutting-edge techniques in calibrating heterogeneous agent models to match empirical moments.
                            </p>
                        </div>
                    </div>
                    </div>
                </section>

                <!-- Section 5: Notebooks -->
                <section id="notebooks" class="space-y-6 py-8 fade-in-section">
                    <div id="notebooks-content">
                        <!-- Content will be loaded from markdown -->
                    </div>
                    <div id="notebooks-cards" class="grid grid-cols-2 gap-6">
                        <!-- Cards will be generated from markdown content -->
                    </div>
                </section>

                <!-- Section 6: Tools -->
                <section id="tools" class="space-y-6 py-8 fade-in-section">
                    <div id="tools-content">
                        <!-- Content will be loaded from markdown -->
                    </div>
                </section>

                <!-- Section 7: Replications -->
                <section id="replications" class="space-y-6 py-8 fade-in-section">
                    <div id="replications-content">
                        <!-- Content will be loaded from markdown -->
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer px-5">
        <div class="container">
            <div class="row gx-5">
                <div class="col-md-7">
                    <p>Econ-ARK is headed by <a href="http://www.econ2.jhu.edu/people/ccarroll/">Christopher D. Carroll</a>, Professor of Economics at the Johns Hopkins University.</p>
                    <p>The project is currently the recepient of a generous corporate sponsorship from <a href="https://www.troweprice.com/">T. Rowe Price</a> through <a href="https://www.numfocus.org/">NumFOCUS</a>.</p>
                    <p>The project has been a recipient of grants from the <a href="https://sloan.org/">Sloan foundation</a> and the <a href="https://www.thinkforwardinitiative.com/">Think Forward Initiative</a>, and is under the umbrella of projects with fiscal sponsorship by <a href="https://www.numfocus.org/">NumFOCUS</a>.</p>
                    <p>Please remember to <a href="/acknowledging">acknowledge and cite</a> the use of Econ-ARK.</p>
                    <p>We are very grateful for any <a href="https://numfocus.salsalabs.org/donate-to-econ-ark/">donations</a> towards the Econ-ARK project.</p>
                </div>
                <div class="offset-md-1 col-md-3">
                    <p class="sponsor"><a href="https://www.numfocus.org/"><img src="/assets/img/numfocus.png" alt="NumFOCUS logo" class="responsive"></a></p>
                </div>
            </div>
            <div class="row">
                <p>&copy; 2023 &ndash; <a href="https://econ-ark.org/">Econ-ARK</a>. Hosted with <a href="https://pages.github.com/">GitHub Pages</a>.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS (matching main site) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const app = {
                // Initialize all components
                async init() {
                    await this.loadMarkdownContent();
                    this.initScrollspy();
                    await this.initTimeline();
                    this.initDashboards();
                    this.initFadeInScroll();
                    this.initSolverTabs();
                    this.initTypewriter();
                },
                
                // Load markdown content from external files
                async loadMarkdownContent() {
                    const contentMap = {
                        'overview-content': 'overview.md',
                        'featured-tools-content': 'featured-tools.md',
                        'bewley-model-content': 'bewley-model.md',
                        'notebooks-content': 'notebooks.md',
                        'tools-content': 'tools.md',
                        'replications-content': 'replications.md',
                        'implications-content': 'implications.md',
                        'bewley-basics-intro': 'bewley-basics-intro.md',
                        'computing-bewley-intro': 'computing-bewley-intro.md',
                        'interactive-dashboards-intro': 'interactive-dashboards-intro.md'
                    };
                    
                    for (const [elementId, filename] of Object.entries(contentMap)) {
                        try {
                            const response = await fetch(`/pages/journeys/central-bank-content/${filename}`);
                            if (response.ok) {
                                const markdown = await response.text();
                                const html = marked.parse(markdown);
                                
                                const element = document.getElementById(elementId);
                                if (element) {
                                    if (elementId === 'overview-content') {
                                        // Special handling for overview to extract title and subtitle
                                        const lines = markdown.split('\n');
                                        const title = lines[0].replace('# ', '');
                                        const subtitle = lines[2].replace('**', '').replace('**', '');
                                        const content = lines.slice(4).join('\n');
                                        
                                        element.innerHTML = `
                                            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight">${title}</h1>
                                        `;
                                        
                                        // Add subtitle as separate element with blue styling
                                        const subtitleDiv = document.createElement('p');
                                        subtitleDiv.className = 'text-xl leading-relaxed text-[#005B8F] mt-2';
                                        subtitleDiv.textContent = subtitle;
                                        element.appendChild(subtitleDiv);
                                        
                                        // Add main text to the overview-main-text div
                                        const mainTextElement = document.getElementById('overview-main-text');
                                        if (mainTextElement) {
                                            mainTextElement.innerHTML = marked.parse(content);
                                        }
                                    } else {
                                        element.innerHTML = html;
                                        element.classList.add('markdown-content');
                                        
                                        // Add section-title class to h1 elements
                                        const h1Elements = element.querySelectorAll('h1');
                                        h1Elements.forEach(h1 => {
                                            h1.classList.add('section-title', 'text-3xl', 'font-bold', 'tracking-tight', 'text-slate-900');
                                        });
                                    }

                                    if (elementId === 'implications-content') {
                                        const listItems = element.querySelectorAll('li');
                                        const icons = ['fas fa-sitemap', 'fas fa-balance-scale-left', 'fas fa-database'];
                                        listItems.forEach((li, index) => {
                                            if (icons[index]) {
                                                const icon = document.createElement('i');
                                                icon.className = `fas ${icons[index]} fa-fw`;
                                                li.prepend(icon);
                                            }
                                        });
                                    }
                                    
                                    // Special formatting for bewley-basics-intro
                                    if (elementId === 'bewley-basics-intro') {
                                        const h2 = element.querySelector('h2');
                                        if (h2) {
                                            h2.className = 'text-2xl font-bold tracking-tight text-slate-800';
                                        }
                                        const p = element.querySelector('p');
                                        if (p) {
                                            p.className = 'text-slate-600 mt-4';
                                        }
                                    }
                                }
                            }
                        } catch (error) {
                            console.error(`Error loading ${filename}:`, error);
                            // Fallback content
                            if (elementId === 'overview-content') {
                                document.getElementById(elementId).innerHTML = `
                                    <h1 class="text-4xl font-bold mb-4 leading-tight">From Theory to Policy: A HANK Journey</h1>
                                    <p class="text-xl leading-relaxed" style="color: var(--econ-ark-blue);">Master Heterogeneous Agent New Keynesian models for modern monetary policy</p>
                                `;
                            }
                        }
                    }
                },

                // Scrollspy for sidebar navigation
                initScrollspy() {
                    const sections = document.querySelectorAll('section[id]');
                    const navLinks = document.querySelectorAll('.sidebar a[href^="#"]');
                    
                    function updateActiveLink() {
                        let current = '';
                        sections.forEach(section => {
                            const sectionTop = section.offsetTop;
                            if (scrollY >= (sectionTop - 100)) {
                                current = section.getAttribute('id');
                            }
                        });
                        
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${current}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                    
                    window.addEventListener('scroll', updateActiveLink);
                    updateActiveLink();
                },

                // Timeline component
                async initTimeline() {
                    // First, load timeline data from markdown
                    let timelineData = {};
                    try {
                        const response = await fetch('/pages/journeys/central-bank-content/timeline-content.md');
                        if (response.ok) {
                            const markdown = await response.text();
                            const sections = markdown.split('\n## ').slice(1);
                            
                            sections.forEach(section => {
                                const lines = section.split('\n');
                                const year = lines[0].trim();
                                const titleLine = lines.find(line => line.startsWith('### '));
                                const title = titleLine ? titleLine.replace('### ', '').trim() : '';
                                const content = lines.slice(lines.indexOf(titleLine) + 1).join('\n').trim();
                                
                                timelineData[year] = {
                                    title: title,
                                    content: content
                                };
                            });
                        }
                    } catch (error) {
                        console.error('Error loading timeline content:', error);
                        // Fallback to hardcoded data
                        timelineData = {
                            'default': {
                                title: "Select a milestone to learn more",
                                content: "Click on any year in the timeline to explore the key developments in heterogeneous agent modeling that led to today's powerful HANK frameworks."
                            }
                        };
                    }
                    
                    const items = document.querySelectorAll('.timeline-item');
                    const content = document.getElementById('timeline-content');
                    
                    items.forEach(item => {
                        item.addEventListener('click', () => {
                            // Remove active class from all items
                            items.forEach(i => i.classList.remove('active'));
                            // Add active class to clicked item
                            item.classList.add('active');
                            
                            const year = item.dataset.year;
                            const data = timelineData[year];
                            
                            content.innerHTML = `
                                <h4 class="font-bold mb-3 text-lg" style="color: var(--econ-ark-blue);">${data.title}</h4>
                                <p class="text-sm text-gray-600 leading-relaxed">${data.content}</p>
                            `;
                        });
                    });
                    
                    // Initialize with default content
                    if (timelineData['default']) {
                        const content = document.getElementById('timeline-content');
                        content.innerHTML = `
                            <h4 class="font-bold mb-3 text-lg" style="color: var(--econ-ark-blue);">${timelineData['default'].title}</h4>
                            <p class="text-sm text-gray-600 leading-relaxed">${timelineData['default'].content}</p>
                        `;
                    }
                },

                // Dashboard components
                initDashboards() {
                    this.initTabs();
                    this.initImpulseResponse();
                    this.initWealthDistribution();
                    this.initPandemicModeling();
                },

                initTabs() {
                    const tabs = document.querySelectorAll('.tab');
                    const dashboards = document.querySelectorAll('.dashboard');
                    
                    tabs.forEach(tab => {
                        tab.addEventListener('click', () => {
                            // Remove active class from all tabs
                            tabs.forEach(t => t.classList.remove('active'));
                            // Add active class to clicked tab
                            tab.classList.add('active');
                            
                            // Hide all dashboards
                            dashboards.forEach(d => d.classList.add('hidden'));
                            // Show selected dashboard
                            const targetDashboard = document.getElementById(tab.dataset.tab);
                            targetDashboard.classList.remove('hidden');
                        });
                    });
                    
                    // Activate first tab by default
                    tabs[0].click();
                },

                initImpulseResponse() {
                    const ctx = document.getElementById('impulse-chart').getContext('2d');
                    const shockSlider = document.getElementById('shock-size');
                    const impatienceSlider = document.getElementById('impatience');
                    const shockValue = document.getElementById('shock-value');
                    const impatienceValue = document.getElementById('impatience-value');
                    const peakResponse = document.getElementById('peak-response');
                    
                    // Generate quarters (0 to 20)
                    const quarters = Array.from({length: 21}, (_, i) => i);
                    
                    const chart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: quarters,
                            datasets: [{
                                label: '% Deviation from Steady State',
                                data: [],
                                borderColor: 'var(--econ-ark-red)',
                                backgroundColor: 'var(--econ-ark-red)',
                                fill: false,
                                tension: 0.3
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                x: {
                                    title: {
                                        display: true,
                                        text: 'Quarters After Shock'
                                    }
                                },
                                y: {
                                    title: {
                                        display: true,
                                        text: '% Deviation from Steady State'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    display: false
                                }
                            }
                        }
                    });
                    
                    function updateChart() {
                        const shock = parseFloat(shockSlider.value);
                        const impatience = parseFloat(impatienceSlider.value);
                        
                        shockValue.textContent = shock.toFixed(1);
                        impatienceValue.textContent = impatience.toFixed(2);
                        
                        const impact = shock * 2; // Scale the impact
                        const data = quarters.map(quarter => {
                            if (quarter === 0) return 0;
                            return impact * Math.pow(impatience * 0.8, quarter) * Math.cos(quarter * Math.PI / 8);
                        });
                        
                        chart.data.datasets[0].data = data;
                        chart.update();
                        
                        const peak = Math.max(...data.map(Math.abs));
                        peakResponse.textContent = peak.toFixed(2);
                    }
                    
                    shockSlider.addEventListener('input', updateChart);
                    impatienceSlider.addEventListener('input', updateChart);
                    
                    // Initial update
                    updateChart();
                },

                initWealthDistribution() {
                    const ctx = document.getElementById('wealth-chart').getContext('2d');
                    const giniSlider = document.getElementById('gini');
                    const giniValue = document.getElementById('gini-value');
                    const top10Share = document.getElementById('top-10-share');
                    
                    const deciles = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th'];
                    
                    const chart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: deciles,
                            datasets: [{
                                label: '% of Total Wealth',
                                data: [],
                                backgroundColor: 'var(--econ-ark-orange)',
                                borderColor: 'var(--econ-ark-orange)',
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                x: {
                                    title: {
                                        display: true,
                                        text: 'Wealth Decile'
                                    }
                                },
                                y: {
                                    title: {
                                        display: true,
                                        text: '% of Total Wealth'
                                    },
                                    min: 0,
                                    max: 50
                                }
                            },
                            plugins: {
                                legend: {
                                    display: false
                                }
                            }
                        }
                    });
                    
                    function updateChart() {
                        const gini = parseFloat(giniSlider.value);
                        giniValue.textContent = gini.toFixed(2);
                        
                        // Generate wealth distribution based on Gini coefficient
                        // Simplified log-normal approximation
                        const variance = (gini * 2) ** 2;
                        const baseShares = [0.5, 1.0, 1.5, 2.5, 4.0, 6.0, 9.0, 13.0, 20.0, 42.5];
                        
                        // Adjust shares based on Gini coefficient
                        const data = baseShares.map((share, i) => {
                            if (i < 5) {
                                return share * (1 - gini * 0.7); // Lower deciles get less
                            } else {
                                return share * (1 + gini * 0.8); // Upper deciles get more
                            }
                        });
                        
                        // Normalize to sum to 100
                        const total = data.reduce((sum, val) => sum + val, 0);
                        const normalizedData = data.map(val => (val / total) * 100);
                        
                        chart.data.datasets[0].data = normalizedData;
                        chart.update();
                        
                        top10Share.textContent = normalizedData[9].toFixed(1);
                    }
                    
                    giniSlider.addEventListener('input', updateChart);
                    
                    // Initial update
                    updateChart();
                },

                initPandemicModeling() {
                    // Initialize pandemic dashboard with three key charts
                    this.initUnemploymentChart();
                    this.initConsumptionChart();
                    this.initStimulusChart();
                    this.initPandemicControls();
                },

                initUnemploymentChart() {
                    const ctx = document.getElementById('unemployment-chart').getContext('2d');
                    const quarters = ["'20 Q1", "Q2", "Q3", "Q4", "'21 Q1", "Q2", "Q3", "Q4"];
                    
                    this.unemploymentChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: quarters,
                            datasets: [
                                {
                                    label: 'Baseline (No Pandemic)',
                                    data: [4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5],
                                    borderColor: '#6b7280',
                                    backgroundColor: '#6b7280',
                                    fill: false,
                                    tension: 0.3,
                                    borderWidth: 2
                                },
                                {
                                    label: 'With Pandemic Response',
                                    data: [],
                                    borderColor: 'var(--econ-ark-red)',
                                    backgroundColor: 'var(--econ-ark-red)',
                                    fill: false,
                                    tension: 0.3,
                                    borderWidth: 2
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                x: { grid: { display: false } },
                                y: { 
                                    grid: { color: 'rgba(44, 64, 83, 0.1)', drawBorder: false },
                                    beginAtZero: true, 
                                    max: 20, 
                                    title: { display: true, text: 'Unemployment Rate (%)' } 
                                }
                            },
                            plugins: {
                                title: { 
                                    display: true, 
                                    text: 'Unemployment Rate Response', 
                                    font: { size: 16, weight: '600', family: "'Inter', sans-serif" }, 
                                    color: '#005B8F' // HARK Baby Blue
                                },
                                legend: { 
                                    position: 'bottom',
                                    labels: { font: { family: "'Inter', sans-serif" }, boxWidth: 12 }
                                },
                                tooltip: {
                                    backgroundColor: 'var(--econ-ark-blue)',
                                    titleFont: { family: "'Inter', sans-serif" },
                                    bodyFont: { family: "'Inter', sans-serif" },
                                    padding: 10,
                                    cornerRadius: 4
                                }
                            }
                        }
                    });
                },

                initConsumptionChart() {
                    const ctx = document.getElementById('consumption-chart').getContext('2d');
                    const quarters = ["'20 Q1", "Q2", "Q3", "Q4", "'21 Q1", "Q2", "Q3", "Q4"];
                    
                    this.consumptionChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: quarters,
                            datasets: [
                                {
                                    label: 'Baseline',
                                    data: [2.8, 2.8, 2.8, 2.8, 2.8, 2.8, 2.8, 2.8],
                                    borderColor: '#6b7280',
                                    backgroundColor: '#6b7280',
                                    fill: false,
                                    tension: 0.3,
                                    borderWidth: 2
                                },
                                {
                                    label: 'No Policy Response',
                                    data: [],
                                    borderColor: 'var(--econ-ark-red)',
                                    backgroundColor: 'var(--econ-ark-red)',
                                    fill: false,
                                    tension: 0.3,
                                    borderWidth: 2,
                                    borderDash: [5, 5]
                                },
                                {
                                    label: 'With CARES Act',
                                    data: [],
                                    borderColor: 'var(--econ-ark-blue)',
                                    backgroundColor: 'var(--econ-ark-blue)',
                                    fill: false,
                                    tension: 0.3,
                                    borderWidth: 2
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                x: { grid: { display: false } },
                                y: {
                                    grid: { color: 'rgba(44, 64, 83, 0.1)', drawBorder: false },
                                    title: {
                                        display: true,
                                        text: 'Aggregate Consumption (Trillion $)'
                                    }
                                }
                            },
                            plugins: {
                                title: { 
                                    display: true, 
                                    text: 'Aggregate Consumption Response', 
                                    font: { size: 16, weight: '600', family: "'Inter', sans-serif" }, 
                                    color: '#005B8F' // HARK Baby Blue
                                },
                                legend: {
                                    position: 'bottom',
                                    labels: { font: { family: "'Inter', sans-serif" }, boxWidth: 12 }
                                },
                                tooltip: {
                                    backgroundColor: 'var(--econ-ark-blue)',
                                    titleFont: { family: "'Inter', sans-serif" },
                                    bodyFont: { family: "'Inter', sans-serif" },
                                    padding: 10,
                                    cornerRadius: 4
                                }
                            }
                        }
                    });
                },

                initStimulusChart() {
                    const ctx = document.getElementById('stimulus-chart').getContext('2d');
                    const categories = ['Low Income', 'Middle Income', 'High Income'];
                    
                    this.stimulusChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: categories,
                            datasets: [
                                {
                                    label: 'Consumption Response (%)',
                                    data: [],
                                    backgroundColor: 'var(--econ-ark-orange)',
                                    borderColor: 'var(--econ-ark-orange)',
                                    borderWidth: 1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                x: { grid: { display: false } },
                                y: {
                                    grid: { color: 'rgba(44, 64, 83, 0.1)', drawBorder: false },
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'Consumption Response (%)'
                                    }
                                }
                            },
                            plugins: {
                                title: { 
                                    display: true, 
                                    text: 'Policy Impact by Income Group', 
                                    font: { size: 16, weight: '600', family: "'Inter', sans-serif" }, 
                                    color: '#005B8F' // HARK Baby Blue
                                },
                                legend: { display: false },
                                tooltip: {
                                    backgroundColor: 'var(--econ-ark-blue)',
                                    titleFont: { family: "'Inter', sans-serif" },
                                    bodyFont: { family: "'Inter', sans-serif" },
                                    padding: 10,
                                    cornerRadius: 4,
                                    displayColors: false
                                }
                            }
                        }
                    });
                },

                initPandemicControls() {
                    // Initialize sliders and their event handlers
                    const sliders = ['pandemic-spending', 'pandemic-duration', 'pandemic-stimulus', 'pandemic-benefits'];
                    
                    sliders.forEach(sliderId => {
                        const slider = document.getElementById(sliderId);
                        const valueSpan = document.getElementById(sliderId + '-value');
                        
                        if (slider && valueSpan) {
                            slider.addEventListener('input', (e) => {
                                const value = parseFloat(e.target.value);
                                valueSpan.textContent = value.toFixed(2);
                                this.updatePandemicCharts();
                            });
                        }
                    });
                    
                    // Initial update
                    this.updatePandemicCharts();
                },

                updatePandemicCharts() {
                    // Get current parameter values
                    const spendingReduction = parseFloat(document.getElementById('pandemic-spending').value);
                    const lockdownDuration = parseFloat(document.getElementById('pandemic-duration').value);
                    const stimulusAmount = parseFloat(document.getElementById('pandemic-stimulus').value);
                    const benefitsBonus = parseFloat(document.getElementById('pandemic-benefits').value);
                    
                    // Calculate unemployment response
                    const baseImpact = (1 - spendingReduction) * 30; // Scale factor
                    const unemploymentData = [
                        4.5, // Pre-pandemic
                        4.5 + baseImpact * 0.3, // Q1 2020
                        4.5 + baseImpact, // Q2 2020 - peak
                        4.5 + baseImpact * Math.pow(0.8, lockdownDuration - 1), // Q3 2020
                        4.5 + baseImpact * Math.pow(0.6, lockdownDuration), // Q4 2020
                        4.5 + baseImpact * Math.pow(0.4, lockdownDuration), // Q1 2021
                        4.5 + baseImpact * Math.pow(0.25, lockdownDuration), // Q2 2021
                        4.5 + baseImpact * Math.pow(0.15, lockdownDuration)  // Q3 2021
                    ];
                    
                    // Calculate consumption responses
                    const consumptionImpact = (1 - spendingReduction) * 0.25;
                    const policyBoost = (stimulusAmount + benefitsBonus * 0.1) * 0.05;
                    const baselineConsumption = 2.8; // In trillions
                    
                    const consumptionNoPolicy = [baselineConsumption, baselineConsumption * (1 - consumptionImpact * 0.3), baselineConsumption * (1 - consumptionImpact), 
                                                baselineConsumption * (1 - consumptionImpact * 0.8), baselineConsumption * (1 - consumptionImpact * 0.6),
                                                baselineConsumption * (1 - consumptionImpact * 0.4), baselineConsumption * (1 - consumptionImpact * 0.25), baselineConsumption * (1 - consumptionImpact * 0.15)];
                    
                    const consumptionWithPolicy = consumptionNoPolicy.map((value, index) => {
                        if (index >= 1 && index <= 4) { // Policy active Q1-Q4 2020
                            return value + policyBoost * baselineConsumption * Math.pow(0.8, index - 1);
                        }
                        return value;
                    });
                    
                    // Calculate stimulus effectiveness by income group
                    const stimulusEffectiveness = [
                        stimulusAmount * 8 + benefitsBonus * 2, // Low income - high MPC
                        stimulusAmount * 4 + benefitsBonus * 1, // Middle income - medium MPC
                        stimulusAmount * 1 + benefitsBonus * 0.2 // High income - low MPC
                    ];
                    
                    // Update charts
                    this.unemploymentChart.data.datasets[1].data = unemploymentData;
                    this.unemploymentChart.update();
                    
                    this.consumptionChart.data.datasets[1].data = consumptionNoPolicy;
                    this.consumptionChart.data.datasets[2].data = consumptionWithPolicy;
                    this.consumptionChart.update();
                    
                    this.stimulusChart.data.datasets[0].data = stimulusEffectiveness;
                    this.stimulusChart.update();
                    
                    // Update key results
                    const peakUnemp = Math.max(...unemploymentData);
                    const consumptionDrop = ((baselineConsumption - Math.min(...consumptionWithPolicy)) / baselineConsumption * 100);
                    const policyEffect = ((Math.min(...consumptionWithPolicy) - Math.min(...consumptionNoPolicy)) / Math.min(...consumptionNoPolicy) * 100);
                    
                    document.getElementById('pandemic-peak-unemp').textContent = peakUnemp.toFixed(1);
                    document.getElementById('pandemic-consumption-drop').textContent = consumptionDrop.toFixed(1);
                    document.getElementById('pandemic-policy-effect').textContent = policyEffect.toFixed(1);
                },

                // Fade-in sections on scroll
                initFadeInScroll() {
                    const sections = document.querySelectorAll('.fade-in-section');
                    const subsections = document.querySelectorAll('.fade-in-subsection');
                    
                    if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
                        const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                if (entry.isIntersecting) {
                                    entry.target.classList.add('is-visible');
                                    observer.unobserve(entry.target);
                                }
                            });
                        }, {
                            threshold: 0.1
                        });

                        sections.forEach(section => {
                            observer.observe(section);
                        });
                        
                        subsections.forEach(subsection => {
                            observer.observe(subsection);
                        });
                    } else {
                        sections.forEach(section => {
                            section.classList.add('is-visible');
                        });
                        subsections.forEach(subsection => {
                            subsection.classList.add('is-visible');
                        });
                    }
                },

                // Initialize solver tabs
                initSolverTabs() {
                    const tabs = document.querySelectorAll('.solver-tab');
                    const panes = document.querySelectorAll('.solver-pane');

                    tabs.forEach(tab => {
                        tab.addEventListener('click', () => {
                            // Deactivate all
                            tabs.forEach(t => t.classList.remove('active'));
                            panes.forEach(p => p.classList.remove('active'));

                            // Activate clicked
                            tab.classList.add('active');
                            const targetPane = document.getElementById(tab.dataset.tab);
                            if(targetPane) {
                                targetPane.classList.add('active');
                            }
                        });
                    });
                },
                
                // Live-typewriter effect for the Build with Econ-ARK code box
                initTypewriter() {
                    const pre = document.getElementById('typed-code');
                    if (!pre) return;

                    // Full raw python code (no HTML)
                    const raw = `# Step 1: Define the heterogeneous agent economy
from HARK.ConsumptionSaving.ConsIndShockModel import IndShockConsumerType
from HARK.distribution import DiscreteDistribution
import numpy as np

# Create heterogeneous agents with different discount factors
agent_types = []
for beta in np.linspace(0.92, 0.98, 5):
    agent = IndShockConsumerType(
        DiscFac=beta, CRRA=2.0, Rfree=1.01,
        PermShkStd=[0.06], TranShkStd=[0.2]
    )
    agent_types.append(agent)

# Step 2: Solve for the steady state
for agent in agent_types:
    agent.solve()          # Solve individual problem
    agent.initialize_sim() # Initialize simulation
    agent.simulate()       # Find stationary distribution

# Step 3: Compute steady-state aggregates
C_ss = sum([agent.state_now['cNrm'].mean() for agent in agent_types])
A_ss = sum([agent.state_now['aNrm'].mean() for agent in agent_types])

# Step 4: Build sequence-space Jacobians for policy analysis
from sequence_jacobian import het_block, simple_block, create_model

@het_block(exogenous=['r','w'], policy=['a'], backward=['Va'])
def household(Va_p, a_grid, e_grid, r, w, beta, eis):
    # Backward step: consumption from Euler equation
    c_p = (beta*(1+r)*Va_p)**(-eis)
    # Forward step: update value function
    Va  = (1+r)*c_p**(-1/eis)
    return Va, c_p

G = household.jacobian(ss, ['r','w'], ['C','A'])
print(f"Impact of 1% rate cut on consumption: {G['C','r'][0]:.3f}%")`;

                    // Prism highlight to HTML
                    const highlighted = Prism.highlight(raw, Prism.languages.python, 'python');
                    
                    // Pre-fill with invisible text to establish box size
                    pre.innerHTML = `<span style="opacity: 0.1;">${highlighted}</span>`;

                    // Typewriter variables
                    let idx = 0;
                    const speed = 15; // ms per char

                    // Observer to trigger once in view
                    const obs = new IntersectionObserver(entries => {
                        entries.forEach(e => {
                            if (e.isIntersecting) {
                                obs.unobserve(pre);
                                // Clear and start typing
                                pre.innerHTML = '';
                                setTimeout(type, 500); // Small delay before typing starts
                            }
                        });
                    }, {threshold: 0.4});
                    obs.observe(pre);

                    function type() {
                        if (idx <= highlighted.length) {
                            pre.innerHTML = highlighted.slice(0, idx) + '<span class="type-cursor">|</span>';
                            
                            // Auto-scroll to keep cursor in view
                            const container = pre.parentElement;
                            const cursor = pre.querySelector('.type-cursor');
                            if (cursor) {
                                const cursorBottom = cursor.offsetTop + cursor.offsetHeight;
                                const containerBottom = container.scrollTop + container.clientHeight;
                                if (cursorBottom > containerBottom - 50) {
                                    container.scrollTop = cursorBottom - container.clientHeight + 50;
                                }
                            }
                            
                            idx++;
                            setTimeout(type, speed);
                        } else {
                            // Keep cursor blinking for a bit, then remove
                            setTimeout(() => {
                                pre.innerHTML = highlighted;
                            }, 1000);
                        }
                    }
                }
            };
            
            // Initialize the application
            app.init();
            
            // Mobile navigation toggle (matching main site)
            const toggleNav = document.getElementById('toggleNav');
            const navigation = document.querySelector('.header .navigation');
            
            if (toggleNav && navigation) {
                toggleNav.addEventListener('click', function() {
                    navigation.classList.toggle('show');
                });
            }
        });
    </script>
</body>
</html> 